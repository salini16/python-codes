<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Air Quality Forecast Engine</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background: #f8f9fa;
      font-family: Arial, sans-serif;
    }
    .dashboard-container {
      padding: 20px;
    }
    .chart-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .header {
      font-size: 24px;
      font-weight: bold;
      color: #004085;
      margin-bottom: 10px;
    }
    .toggle-buttons {
      float: right;
    }
  </style>
</head>
<body>

<div class="container-fluid dashboard-container">
  <h2 class="header">Air Quality Forecast Engine</h2>
  <p><strong>Milestone 2: Working Application (Weeks 3â€“4)</strong></p>

  <div class="row">
    <!-- Model Performance -->
    <div class="col-md-6">
      <div class="chart-card">
        <div class="d-flex justify-content-between align-items-center">
          <h5>Model Performance</h5>
          <div class="toggle-buttons btn-group">
            <button class="btn btn-sm btn-primary" onclick="updatePerformance('rmse')">RMSE</button>
            <button class="btn btn-sm btn-secondary" onclick="updatePerformance('mae')">MAE</button>
          </div>
        </div>
        <canvas id="performanceChart"></canvas>
      </div>
    </div>

    <!-- PM2.5 Forecast -->
    <div class="col-md-6">
      <div class="chart-card">
        <h5>PM2.5 Forecast</h5>
        <canvas id="forecastChart"></canvas>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Best Model by Pollutant -->
    <div class="col-md-6">
      <div class="chart-card">
        <h5>Best Model by Pollutant</h5>
        <table class="table table-bordered text-center">
          <thead class="table-light">
            <tr>
              <th>Pollutant</th>
              <th>Best Model</th>
              <th>RMSE</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>PM2.5</td><td>LSTM</td><td>4.32</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>PM10</td><td>ARIMA</td><td>6.78</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>NO2</td><td>LSTM</td><td>3.21</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>O3</td><td>Prophet</td><td>5.43</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>SO2</td><td>LSTM</td><td>2.15</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>CO</td><td>ARIMA</td><td>1.95</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>NH3</td><td>Prophet</td><td>2.80</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>Pb</td><td>LSTM</td><td>0.85</td><td><span class="badge bg-success">Active</span></td></tr>
            <tr><td>Benzene</td><td>Prophet</td><td>1.23</td><td><span class="badge bg-success">Active</span></td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Forecast Accuracy -->
    <div class="col-md-6">
      <div class="chart-card">
        <h5>Forecast Accuracy</h5>
        <canvas id="accuracyChart"></canvas>
      </div>
    </div>
  </div>
</div>

<script>
  // === Model Performance Chart ===
  const ctxPerformance = document.getElementById('performanceChart').getContext('2d');
  const performanceData = {
    rmse: {
      labels: ['PM2.5', 'PM10', 'NO2', 'O3', 'SO2', 'CO', 'NH3', 'Pb', 'Benzene'],
      datasets: [
        { label: 'ARIMA', data: [5.3, 6.7, 4.2, 6.1, 3.5, 1.9, 3.0, 1.2, 1.8], backgroundColor: '#007bff' },
        { label: 'Prophet', data: [6.1, 7.2, 3.9, 5.4, 3.0, 2.2, 2.8, 1.0, 1.2], backgroundColor: '#17a2b8' },
        { label: 'LSTM', data: [4.3, 5.9, 3.2, 5.6, 2.1, 2.0, 2.6, 0.85, 1.3], backgroundColor: '#dc3545' }
      ]
    },
    mae: {
      labels: ['PM2.5', 'PM10', 'NO2', 'O3', 'SO2', 'CO', 'NH3', 'Pb', 'Benzene'],
      datasets: [
        { label: 'ARIMA', data: [3.8, 4.9, 3.1, 4.2, 2.5, 1.3, 2.1, 0.7, 1.0], backgroundColor: '#007bff' },
        { label: 'Prophet', data: [4.2, 5.3, 2.8, 3.9, 2.1, 1.4, 2.0, 0.6, 0.9], backgroundColor: '#17a2b8' },
        { label: 'LSTM', data: [3.1, 4.4, 2.3, 3.8, 1.7, 1.2, 1.9, 0.5, 0.8], backgroundColor: '#dc3545' }
      ]
    }
  };

  let performanceChart = new Chart(ctxPerformance, {
    type: 'bar',
    data: performanceData.rmse,
    options: { responsive: true, plugins: { legend: { position: 'top' } } }
  });

  function updatePerformance(type) {
    performanceChart.data = performanceData[type];
    performanceChart.update();
  }

  // === Forecast Chart ===
  const ctxForecast = document.getElementById('forecastChart').getContext('2d');
  new Chart(ctxForecast, {
    type: 'line',
    data: {
      labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
      datasets: [
        { label: 'Actual', data: [30, 40, 50, 35, 25, 45], borderColor: '#007bff', fill: false },
        { label: 'Forecast', data: [32, 42, 48, 38, 28, 46], borderColor: '#dc3545', borderDash: [5,5], fill: false },
        { label: 'Confidence Interval', data: [35, 45, 53, 41, 30, 49], borderColor: '#17a2b8', borderDash: [3,6], fill: false }
      ]
    },
    options: { responsive: true }
  });

  // === Forecast Accuracy Chart ===
  const ctxAccuracy = document.getElementById('accuracyChart').getContext('2d');
  new Chart(ctxAccuracy, {
    type: 'line',
    data: {
      labels: ['1h', '6h', '12h', '24h', '48h'],
      datasets: [
        { label: 'LSTM', data: [95, 92, 89, 85, 82], borderColor: '#dc3545', fill: false },
        { label: 'ARIMA', data: [92, 89, 85, 81, 77], borderColor: '#007bff', fill: false },
        { label: 'Prophet', data: [93, 90, 87, 83, 79], borderColor: '#17a2b8', fill: false }
      ]
    },
    options: { responsive: true }
  });
</script>

</body>
</html>
